const body=document.querySelector("body");body.setAttribute("style","display: block;"),flatpickr("#appointment-date",{altInput:!0,altFormat:"j F Y",dateFormat:"Y-m-d",minDate:"today"}),flatpickr("#appointment-time",{enableTime:!0,noCalendar:!0,dateFormat:"H:i",minTime:"08:00",time_24hr:!0});const successMessage=async()=>{document.querySelector(".appointment-date").setAttribute("class","appointment-date box is-block mx-3 is-hidden");let a=document.querySelector(".success-message");a.setAttribute("class","success-message box is-block has-text-centered mx-3 notification is-success")};document.querySelector(".dashboard").addEventListener("click",async a=>{a.preventDefault(),document.location.replace("/dashboard")});const numberOfElementsShown=async(a,b)=>{if(a.length>b)for(i=0;i<a.length-b;i++)a[i].remove()},editAppointmentHandler=async a=>{a.preventDefault();const b=document.querySelector("#appointment-time").value.trim(),c=b.slice(0,2),d=b.slice(3,5),e=document.querySelector("#appointment-date").value.trim(),f=`${c}${d}`,g=document.querySelector("#appointment-for").value.trim(),h=document.querySelector("#appointment-with").value.trim(),j=document.querySelector("#appointment-location").value.trim(),k=document.querySelector("#appointment-notes").value.trim(),l=window.location.toString().split("/")[window.location.toString().split("/").length-1];if(e&&f&&g&&h&&j){const a=await fetch(`/api/appointments/${l}`,{method:"PUT",body:JSON.stringify({appointmentDate:e,appointmentTime:f,appointmentFor:g,appointmentWith:h,appointmentLocation:j,appointmentNotes:k}),headers:{"Content-Type":"application/json"}});if(a.ok)successMessage();else{document.querySelector(".error-message").innerHTML="<p>*Failed to edit appointment</p>",alert(a.statusText)}}else{const a=document.querySelector(".error");numberOfElementsShown(a,0);let b;e||(b?b+=`<li>• The Date of the Appointment</li>`:b=`<li>• The Date of the Appointment</li>`),f||(b?b+=`<li>• The Appointment Start Time</li>`:b=`<li>• The Appointment Start Time</li>`),g||(b?b+=`<li>• Who the Appointment is For</li>`:b=`<li>• Who the Appointment is For</li>`),h||(b?b+=`<li>• Who the Appointment is Being Booked With</li>`:b=`<li>• Who the Appointment is Being Booked With</li>`),j||(b?b+=`<li>• The Address of the Appointment</li>`:b=`<li>• The Address of the Appointment</li>`);const c=document.querySelector(".error-message");c.setAttribute("class","error-message notification is-danger my-4 is-block"),a.innerHTML=b}};document.querySelector("#edit-appointment-button").addEventListener("click",editAppointmentHandler);